knbts %>%
group_by(region, sex, agecat) %>%
summarise(pw = mean(pw))
y <- array(knbts_counts10$y, dim = c(5, 2, 8, 10))
n <- array(knbts_counts10$n, dim = c(5, 2, 8, 10))
pw <- array(knbts_pw$pw, dim = c(5, 2, 8))
tot_pw_region <- colSums(pw, dims = 2)
knbts_counts <-
knbts %>%
group_by(region, sex, agecat, .drop = FALSE) %>%
summarise(y = sum(spikepos), n = n())
y <- array(knbts_counts$y, dim = c(5, 2, 8))
n <- array(knbts_counts$n, dim = c(5, 2, 8))
tot_pw_age <- rowSums(pw, dims = 1)
tot_pw_sex <- rowSums(colSums(pw))
View(knbts_counts)
fit <- sampling(
mrp_noperiod,
thin = 1,
data = list(
y = y,
n = n,
pw = pw,
tot_pw_age = tot_pw_age,
tot_pw_sex = tot_pw_sex,
tot_pw_region = tot_pw_region,
x = 166,
z = 901,
N_se = 179,
N_sp = 910),
chains = 3,
warmup = 1000,
iter = 10000,
cores = 3,
seed = 111,
pars = c("bage", "bsex", "bregion",
"sd_age", "sd_region",
"p_region", "p_age",
"p_sex", "p_national"),
refresh = 0
)
options(scipen=999)
out_period1 <- signif(summary(fit)$summary, 3)
out_period1 <- out_period1[18:33, c(1, 4, 8)]
out_period1
library(xlsx)
install.packages("xlsx")
library(xlsx)
library(tidyverse)
library(rstan)
library(sn)
library(readstata13)
options(mc.cores = parallel::detectCores())
rstan_options(auto_write = TRUE)
out_period1
save.dta13(as.data.frame(out_period1), "/Users/motiende/Downloads/2020-12-21/CMOD3/data/out_adj.dta")
install.packages("fabletools")
library(tidyverse)
library(rstan)
library(sn)
library(readstata13)
options(mc.cores = parallel::detectCores())
rstan_options(auto_write = TRUE)
seeck_hcw_data <-
read.dta13("seeck_hcw_analytic_dataset.dta")
unknown_seeck_hcw <-
seeck_hcw_data %>%
pull("od_ratio") %>%
na.omit() %>%
log()
fit_seeck_hcw_data <- sampling(
senspmod,
thin = 1,
data = list(
y = sum(ifelse(exp(unknown_seeck_hcw) > 2, 1, 0)),
x = 166,
z = 901,
N = length(unknown_seeck_hcw),
N_se = 179,
N_sp = 910),
seed = 400,
chains = 3,
warmup = 500,
iter = 1000,
cores = 3,
refresh = 0
)
options(scipen=999)
out <- signif(summary(fit_seeck_hcw_data)$summary, 3)
fit_seeck_hcw_data <- out["p", c(1, 4, 8)]
fit_seeck_hcw_data
View(seeck_hcw_data)
seeck_hcw_nurse <-
seeck_hcw_data %>%
filter(cadre="Nurse") %>%
pull("od_ratio") %>%
na.omit() %>%
log()
seeck_hcw_nurse <-
seeck_hcw_data %>%
filter(cadre=="Nurse") %>%
pull("od_ratio") %>%
na.omit() %>%
log()
table(seeck_hcw_data$cadre)
seeck_hcw_doctor <-
seeck_hcw_data %>%
filter(cadre=="Doctor") %>%
pull("od_ratio") %>%
na.omit() %>%
log()
seeck_hcw_doctor <-
seeck_hcw_data %>%
filter(cadre==4) %>%
pull("od_ratio") %>%
na.omit() %>%
log()
seeck_hcw_doctor <-
seeck_hcw_data %>%
filter(cadre=="Doctor") %>%
pull("od_ratio") %>%
na.omit() %>%
log()
table(seeck_hcw_data$site)
seeck_hcw_kilifi <-
seeck_hcw_data %>%
filter(site=="KLF") %>%
pull("od_ratio") %>%
na.omit() %>%
log()
seeck_hcw_data <-
read.dta13("seeck_hcw_analytic_dataset.dta")
seeck_hcw <-
seeck_hcw_data %>%
pull("od_ratio") %>%
na.omit() %>%
log()
seeck_hcw_nurse <-
seeck_hcw_data %>%
filter(cadre=="Nurse") %>%
pull("od_ratio") %>%
na.omit() %>%
log()
seeck_hcw_doctor <-
seeck_hcw_data %>%
filter(cadre=="Doctor") %>%
pull("od_ratio") %>%
na.omit() %>%
log()
seeck_hcw_co <-
seeck_hcw_data %>%
filter(cadre=="Clinical Officer") %>%
pull("od_ratio") %>%
na.omit() %>%
log()
seeck_hcw_support <-
seeck_hcw_data %>%
filter(cadre=="Support Staff") %>%
pull("od_ratio") %>%
na.omit() %>%
log()
seeck_hcw_pharm <-
seeck_hcw_data %>%
filter(cadre=="Pharmacy") %>%
pull("od_ratio") %>%
na.omit() %>%
log()
seeck_hcw_lab <-
seeck_hcw_data %>%
filter(cadre=="Laboratory") %>%
pull("od_ratio") %>%
na.omit() %>%
log()
seeck_hcw_other <-
seeck_hcw_data %>%
filter(cadre=="Other") %>%
pull("od_ratio") %>%
na.omit() %>%
log()
seeck_hcw_kilifi <-
seeck_hcw_data %>%
filter(site=="KLF") %>%
pull("od_ratio") %>%
na.omit() %>%
log()
seeck_hcw_nbo <-
seeck_hcw_data %>%
filter(site=="NBI") %>%
pull("od_ratio") %>%
na.omit() %>%
log()
seeck_hcw_bus <-
seeck_hcw_data %>%
filter(site=="BUS") %>%
pull("od_ratio") %>%
na.omit() %>%
log()
fit_seeck_hcw_data <- sampling(
senspmod,
thin = 1,
data = list(
y = sum(ifelse(exp(seeck_hcw_nurse) > 2, 1, 0)),
x = 166,
z = 901,
N = length(seeck_hcw),
N_se = 179,
N_sp = 910),
seed = 400,
chains = 3,
warmup = 500,
iter = 1000,
cores = 3,
refresh = 0
)
options(scipen=999)
out <- signif(summary(seeck_hcw_nurse)$summary, 3)
fit_seeck_hcw_data <- sampling(
senspmod,
thin = 1,
data = list(
y = sum(ifelse(exp(seeck_hcw_nurse) > 2, 1, 0)),
x = 166,
z = 901,
N = length(seeck_hcw),
N_se = 179,
N_sp = 910),
seed = 400,
chains = 3,
warmup = 500,
iter = 1000,
cores = 3,
refresh = 0
)
options(scipen=999)
out <- signif(summary(fit_seeck_hcw_data)$summary, 3)
fit_seeck_hcw_data <- out["p", c(1, 4, 8)]
fit_seeck_hcw_data
fit_seeck_hcw_data <- sampling(
senspmod,
thin = 1,
data = list(
y = sum(ifelse(exp(seeck_hcw) > 2, 1, 0)),
x = 166,
z = 901,
N = length(seeck_hcw),
N_se = 179,
N_sp = 910),
seed = 400,
chains = 3,
warmup = 500,
iter = 1000,
cores = 3,
refresh = 0
)
options(scipen=999)
out <- signif(summary(fit_seeck_hcw_data)$summary, 3)
fit_seeck_hcw_data <- out["p", c(1, 4, 8)]
fit_seeck_hcw_data
fit_seeck_hcw_data <- sampling(
senspmod,
thin = 1,
data = list(
y = sum(ifelse(exp(seeck_hcw_nurse) > 2, 1, 0)),
x = 166,
z = 901,
N = length(seeck_hcw_nurse),
N_se = 179,
N_sp = 910),
seed = 400,
chains = 3,
warmup = 500,
iter = 1000,
cores = 3,
refresh = 0
)
options(scipen=999)
out <- signif(summary(fit_seeck_hcw_data)$summary, 3)
fit_seeck_hcw_data <- out["p", c(1, 4, 8)]
fit_seeck_hcw_data
fit_seeck_hcw_data <- sampling(
senspmod,
thin = 1,
data = list(
y = sum(ifelse(exp(seeck_hcw_doctor) > 2, 1, 0)),
x = 166,
z = 901,
N = length(seeck_hcw_doctor),
N_se = 179,
N_sp = 910),
seed = 400,
chains = 3,
warmup = 500,
iter = 1000,
cores = 3,
refresh = 0
)
options(scipen=999)
out <- signif(summary(fit_seeck_hcw_data)$summary, 3)
fit_seeck_hcw_data <- out["p", c(1, 4, 8)]
fit_seeck_hcw_data
fit_seeck_hcw_data <- sampling(
senspmod,
thin = 1,
data = list(
y = sum(ifelse(exp(seeck_hcw_co) > 2, 1, 0)),
x = 166,
z = 901,
N = length(seeck_hcw_co),
N_se = 179,
N_sp = 910),
seed = 400,
chains = 3,
warmup = 500,
iter = 1000,
cores = 3,
refresh = 0
)
options(scipen=999)
out <- signif(summary(fit_seeck_hcw_data)$summary, 3)
fit_seeck_hcw_data <- out["p", c(1, 4, 8)]
fit_seeck_hcw_data
fit_seeck_hcw_data <- sampling(
senspmod,
thin = 1,
data = list(
y = sum(ifelse(exp(seeck_hcw_support) > 2, 1, 0)),
x = 166,
z = 901,
N = length(seeck_hcw_support),
N_se = 179,
N_sp = 910),
seed = 400,
chains = 3,
warmup = 500,
iter = 1000,
cores = 3,
refresh = 0
)
options(scipen=999)
out <- signif(summary(fit_seeck_hcw_data)$summary, 3)
fit_seeck_hcw_data <- out["p", c(1, 4, 8)]
fit_seeck_hcw_data
fit_seeck_hcw_data <- sampling(
senspmod,
thin = 1,
data = list(
y = sum(ifelse(exp(seeck_hcw_pharm) > 2, 1, 0)),
x = 166,
z = 901,
N = length(seeck_hcw_pharm),
N_se = 179,
N_sp = 910),
seed = 400,
chains = 3,
warmup = 500,
iter = 1000,
cores = 3,
refresh = 0
)
options(scipen=999)
out <- signif(summary(fit_seeck_hcw_data)$summary, 3)
fit_seeck_hcw_data <- out["p", c(1, 4, 8)]
fit_seeck_hcw_data
fit_seeck_hcw_data <- sampling(
senspmod,
thin = 1,
data = list(
y = sum(ifelse(exp(seeck_hcw_lab) > 2, 1, 0)),
x = 166,
z = 901,
N = length(seeck_hcw_lab),
N_se = 179,
N_sp = 910),
seed = 400,
chains = 3,
warmup = 500,
iter = 1000,
cores = 3,
refresh = 0
)
options(scipen=999)
out <- signif(summary(fit_seeck_hcw_data)$summary, 3)
fit_seeck_hcw_data <- out["p", c(1, 4, 8)]
fit_seeck_hcw_data
fit_seeck_hcw_data <- sampling(
senspmod,
thin = 1,
data = list(
y = sum(ifelse(exp(seeck_hcw_other) > 2, 1, 0)),
x = 166,
z = 901,
N = length(seeck_hcw_other),
N_se = 179,
N_sp = 910),
seed = 400,
chains = 3,
warmup = 500,
iter = 1000,
cores = 3,
refresh = 0
)
options(scipen=999)
out <- signif(summary(fit_seeck_hcw_data)$summary, 3)
fit_seeck_hcw_data <- out["p", c(1, 4, 8)]
fit_seeck_hcw_data
fit_seeck_hcw_data <- sampling(
senspmod,
thin = 1,
data = list(
y = sum(ifelse(exp(seeck_hcw_kilifi) > 2, 1, 0)),
x = 166,
z = 901,
N = length(seeck_hcw_kilifi),
N_se = 179,
N_sp = 910),
seed = 400,
chains = 3,
warmup = 500,
iter = 1000,
cores = 3,
refresh = 0
)
options(scipen=999)
out <- signif(summary(fit_seeck_hcw_data)$summary, 3)
fit_seeck_hcw_data <- out["p", c(1, 4, 8)]
fit_seeck_hcw_data
fit_seeck_hcw_data <- sampling(
senspmod,
thin = 1,
data = list(
y = sum(ifelse(exp(seeck_hcw_nbo) > 2, 1, 0)),
x = 166,
z = 901,
N = length(seeck_hcw_nbo),
N_se = 179,
N_sp = 910),
seed = 400,
chains = 3,
warmup = 500,
iter = 1000,
cores = 3,
refresh = 0
)
options(scipen=999)
out <- signif(summary(fit_seeck_hcw_data)$summary, 3)
fit_seeck_hcw_data <- out["p", c(1, 4, 8)]
fit_seeck_hcw_data
fit_seeck_hcw_data <- sampling(
senspmod,
thin = 1,
data = list(
y = sum(ifelse(exp(seeck_hcw_bus) > 2, 1, 0)),
x = 166,
z = 901,
N = length(seeck_hcw_bus),
N_se = 179,
N_sp = 910),
seed = 400,
chains = 3,
warmup = 500,
iter = 1000,
cores = 3,
refresh = 0
)
options(scipen=999)
out <- signif(summary(fit_seeck_hcw_data)$summary, 3)
fit_seeck_hcw_data <- out["p", c(1, 4, 8)]
fit_seeck_hcw_data
install.packages(c("cli", "crayon", "qgraph", "rappdirs", "rgdal"))
install.packages(c("rgdal", "systemfonts"))
install.packages("systemfonts")
install.packages(c("distributional", "dplyr", "rgdal", "systemfonts"))
install.packages(c("feasts", "nlme", "rgdal"))
install.packages("rgdal")
install.packages(c("crayon", "RcppArmadillo", "rgdal", "systemfonts", "usethis", "waldo", "xfun"))
install.packages(c("crayon", "RcppArmadillo", "rgdal", "systemfonts", "usethis", "waldo", "xfun"))
install.packages(c("promises", "RcppArmadillo", "rgdal", "systemfonts"))
install.packages("rgdal")
install.packages(c("boot", "cachem", "MASS", "mime", "rgdal"))
install.packages(c("cluster", "crul", "gert", "greybox", "kableExtra", "lifecycle", "rgdal", "testthat"))
install.packages(c("cluster", "gert", "rgdal"))
install.packages(c("cluster", "deldir", "gert", "mgcv", "rgdal"))
install.packages(c("deldir", "mgcv", "rgdal"))
install.packages(c("deldir", "mgcv", "rgdal"))
install.packages(c("boot", "cluster", "deldir", "MASS", "mgcv", "rgdal"))
install.packages(c("cli", "ggraph", "pkgload", "quantreg", "RcppParallel", "rgdal", "smooth", "svglite"))
install.packages(c("Deriv", "quantreg", "rgdal", "smooth", "svglite"))
install.packages(c("farver", "Hmisc", "lubridate", "ps", "quantreg", "rgdal", "smooth", "svglite", "tibble", "units"))
install.packages(c("Hmisc", "rgdal"))
install.packages(c("Hmisc", "isoband", "MatrixModels", "rgdal", "rio", "tidyr"))
install.packages(c("Hmisc", "rgdal", "tinytex"))
install.packages(c("desc", "dplyr", "gamlss", "ggforce", "Hmisc", "pillar", "waldo"))
install.packages("OpenMx")
install.packages(c("doBy", "gamlss.dist", "OpenMx", "pbkrtest", "RcppArmadillo", "zoo"))
install.packages(c("OpenMx", "RcppArmadillo", "rvest"))
install.packages(c("forecast", "greybox", "lavaan", "OpenMx", "parallelly", "RcppArmadillo", "survival", "utf8", "xfun"))
library(dplyr)
setwd("~/Dropbox/MYFILES/3. Consultancies/PwaniUni/2021_MPH_R/Introduction-to-R-short-course-/day2")
birthweight <-read.csv("bw.csv", header = TRUE)
View(birthweight)
knitr::opts_chunk$set(echo = TRUE)
setwd("~/Dropbox/MYFILES/3. Consultancies/PwaniUni/2021_MPH_R")
# perform paired t-test
t.test(birthweight$bweight ~ birthweight$sex, paired=T)
t.test(before, after, paired=T)
before <-c(2000.1, 1090.9, 1920.7, 2130, 2401.4, 1960.9, 1702.2, 1085.5, 2005.2, 1930.7)
after <-c(3920.9, 3903.2, 3450.1, 3903, 4340, 4270.9, 4220, 3830.9, 3920.3, 3502.2)
t.test(before, after, paired=T)
# perform paired t-test
t.test(before, after, paired=T)
# perform paired t-test
t.test(before, after)
